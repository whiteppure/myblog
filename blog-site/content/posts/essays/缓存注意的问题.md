---
title: "使用缓存注意的问题"
date: 2020-06-04
draft: false
tags: ["缓存"]
slug: "cache-problems"
---

### 缓存击穿
key对应的数据存在，但在redis中过期，此时若有大量并发请求过来，这些请求发现缓存过期一般都会从后端DB加载数据并回设到缓存。
大并发集中对这一个点进行访问，当这个key在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个屏障上凿开了一个洞。

解决
- 直接将key设为永不过期

### 缓存穿透
可简单理解为,避开缓存,疯狂请求数据库里没有的数据.从而造成服务器宕机

解决
- 布隆过滤器
- 缓存空值,保护数据源

### 缓存雪崩
简单理解为,在某一个时间段,缓存key大面积失效,集中过期.或者服务器宕机

解决
- 缓存key不同周期,加上一个随机因子
- 设置redis集群
- 限流降级.即加锁,在同一时间段,只允许某个线程访问
- 数据预热.将数据提前加载到redis里边